/*  Coolite Inc. 2004-2007. All rights are reserved. Unauthorized use prohibited. Visit http://www.coolite.com/ for more info. Version 1.3.5THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIEDWARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR APARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FORANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOTLIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESSINTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, ORTORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IFADVISED OF THE POSSIBILITY OF SUCH DAMAGE. */if(typeof(window["BDP"])=="undefined"){window["BDP"]={};}BDP.TimePicker=function(hourInput,minuteInput,secondInput,designatorInput,input,is24Hour,hourNullText,minuteNullText,secondNullText,amDesignator,pmDesignator,readOnly,nullable,autoPostBack,displayType,hourIncrement,minuteIncrement,secondIncrement,nullTimeText,expandedTimeFormat,onClientSelectionChanged){var argumentNames=new Array("hourInput","minuteInput","secondInput","designatorInput","input","is24Hour","hourNullText","minuteNullText","secondNullText","amDesignator","pmDesignator","readOnly","nullable","autopostback","displayType","hourIncrement","minuteIncrement","secondIncrement","nullTimeText","expandedTimeFormat","onClientSelectionChanged");for(var i=0; i<arguments.length; i++) this[argumentNames[i]]=arguments[i];this._isTime=true;this.isMultiInput=(this.displayType=="MultipleTextBox"||this.displayType=="MultipleDropDownList");this.hasHourInput=(this.hourInput!=null), this.hasMinuteInput=(this.minuteInput!=null), this.hasSecondInput=(this.secondInput!=null), this.hasDesignatorInput=(this.designatorInput!=null), this.hasInput=(this.Input!=null);this.common=new Coolite.Common();};BDP.TimePicker.prototype.setSelectedTime=function(time, clear){if(time==null){var useSpecificNullText=(this.nullTimeText=="{0}");if(this.isMultiInput){if(this.hasHourInput) this.setInputValue(this.hourInput, (useSpecificNullText)?this.hourNullText:this.nullTimeText);if(this.hasMinuteInput) this.setInputValue(this.minuteInput, (useSpecificNullText)?this.minuteNullText:this.nullTimeText);if(this.hasSecondInput) this.setInputValue(this.secondInput, (useSpecificNullText)?this.secondNullText:this.nullTimeText);if(this.hasDesignatorInput) this.setInputValue(this.designatorInput, this.amDesignator);}else{this.setInputValue(this.input,(useSpecificNullText)?this.expandedTimeFormat:this.nullTimeText);}return;}if(this.common.isDate(time)){time=time.getTimeOfDay();}var tokens=this.common.tokenizeFormat(this.expandedTimeFormat);var hourToken=null, minuteToken=null, secondToken=null, designatorToken=null;for(var i=0; i<tokens.length; i++){var token=tokens[i];switch(token.toLowerCase()){case "h":case "hh":if(!hourToken) hourToken=token; break;case "m":case "mm":if(!minuteToken) minuteToken=token; break;case "s":case "ss":if(!secondToken) secondToken=token; break;case "t":case "tt":if(!designatorToken) designatorToken=token; break;}}if(this.isMultiInput){if(this.hasHourInput) this.setInputValue(this.hourInput, time.toString(hourToken));if(this.hasMinuteInput) this.setInputValue(this.minuteInput, time.toString(minuteToken));if(this.hasSecondInput) this.setInputValue(this.secondInput, time.toString(secondToken));if(this.hasDesignatorInput) this.setInputValue(this.designatorInput, time.toString(designatorToken, this.amDesignator, this.pmDesignator));}else{this.setInputValue(this.input, time.toString(this.expandedTimeFormat));}};BDP.TimePicker.prototype.getSelectedTime=function(){var hourText=null, minuteText=null, secondText=null, designatorText=null;var hour=null, minute=null, second=null;if(this.isMultiInput){hourText=this.getInputValue(this.hourInput);minuteText=this.getInputValue(this.minuteInput);secondText=this.getInputValue(this.secondInput);designatorText=this.getInputValue(this.designatorInput);if(hourText==this.hourNullText||minuteText==this.minuteNullText||secondText==this.secondNullText){return null };hour=this.parseIntFromMultiInput(hourText, this.hourNullText);minute=this.parseIntFromMultiInput(minuteText, this.minuteNullText);second=this.parseIntFromMultiInput(secondText, this.secondNullText);if(!this.is24Hour && designatorText!=null){if(designatorText==this.amDesignator && hour==12){hour=0;}else if(designatorText==this.pmDesignator && hour!=12){hour=hour+12;}}return new BDP.TimeSpan(null, hour, minute, second);}else{var designators=new Array(this.amDesignator, this.pmDesignator);var timeText=this.common.trim(this.getInputValue(this.input));if(timeText.length==0||timeText.toLowerCase()==this.nullTimeText.toLowerCase()||timeText.toLowerCase()==this.expandedTimeFormat.toLowerCase()){return null;};return new BDP.TimeSpan(timeText, this.expandedTimeFormat, designators);}};BDP.TimePicker.prototype.getSelectedTimeFormatted=function(){var time=this.getSelectedTime();return (time==null)?"":time.toString(this.expandedTimeFormat);};BDP.TimePicker.prototype.parseIntFromMultiInput=function(numberText, nullText){if(numberText!=null && (numberText.length>0||numberText!=nullText)){return parseInt(numberText, 10);}return 0;};BDP.TimePicker.prototype.getInputValue=function(input){return (!input)?null:(input.options)?input.options[input.selectedIndex].value:input.value;};BDP.TimePicker.prototype.setInputValue=function(input, value){if(input){var options=input.options;if(options){for(var i=0; i<options.length; i++){if(options[i].value==value){input.selectedIndex=i;this.fireOnChange(input);return;}}var opt=document.createElement("OPTION");opt.value=value;opt.text=value;options.add(opt, 0);input.selectedIndex=0;}else{input.value=value;}this.fireOnChange(input);}};BDP.TimePicker.prototype.fireOnChange=function(input){if(document.createEvent){var e=document.createEvent("HTMLEvents");e.initEvent("change", true, false );input.dispatchEvent(e);} else if(document.createEventObject)   {input.fireEvent("onchange");}};BDP.TimePicker.prototype.eventSelectionChanged=function(){if(!this.common.addHandler(this, this.onClientSelectionChanged)){return;} };BDP.TimePicker.prototype.clear=function(){this.setSelectedTime(null, true);};BDP.TimePicker.prototype.getIsNull=function(){return (null==this.getSelectedTime());};BDP.TimePicker.prototype.getIsTime=function(){return this._isTime;};BDP.TimePicker.prototype.setEnabled=function(val){if(this.isMultiInput){var parent;if(this.hasHourInput){this.hourInput.disabled=!val; parent=this.hourInput;};if(this.hasMinuteInput){this.minuteInput.disabled=!val; parent=this.minuteInput;};if(this.hasSecondInput){this.secondInput.disabled=!val; parent=this.secondInput;};if(this.hasDesignatorInput){this.designatorInput.disabled=!val; parent=this.designatorInput;};if(parent.parentElement){parent.parentElement.disabled=!val;}}else{this.input.disabled=!val; if(this.input.parentElement){this.input.parentElement.disabled=!val;}}};BDP.TimePicker.prototype.getEnabled=function(){if(this.isMultiInput){if(this.hasHourInput) return !this.hourInput.disabled;if(this.hasMinuteInput) return !this.minuteInput.disabled;if(this.hasSecondInput) return !this.secondInput.disabled;if(this.hasDesignatorInput) return !this.designatorInput.disabled;}return !this.input.disabled;};BDP.TimePicker.prototype.getHourIncrement=function(){return (this.hourIncrement==-1)?0:this.hourIncrement;};BDP.TimePicker.prototype.getMinuteIncrement=function(){return (this.minuteIncrement==-1 && this.displayType=="SingleDropDownList")?30:(this.minuteIncrement==-1)?15:this.minuteIncrement;};BDP.TimePicker.prototype.getSecondIncrement=function(){return (this.secondIncrement==-1)?0:this.secondIncrement;};BDP.TimePicker.prototype.increment=function(val, token){   var t=(this.getSelectedTime()==null)?new BDP.TimeSpan():this.getSelectedTime();if(val && this.common.isNumeric(val)){if(token){switch(token.toLowerCase()){case "d":this.setSelectedTime(t.addDays(val));break;case "h":this.setSelectedTime(t.addHours(val));break;case "m":this.setSelectedTime(t.addMinutes(val)); break;case "s":this.setSelectedTime(t.addSeconds(val)); break;}}else{this.setSelectedTime(t.addMinutes(val));}return;}this.setSelectedTime(t.addHours(this.getHourIncrement()).addMinutes(this.getMinuteIncrement()).addSeconds(this.getSecondIncrement()));};BDP.TimePicker.prototype.decrement=function(val, token){   var t=(this.getSelectedTime()==null)?new BDP.TimeSpan():this.getSelectedTime();if(val && this.common.isNumeric(val)){if(token){switch(token.toLowerCase()){case "d":this.setSelectedTime(t.addDays(-val));break;case "h":this.setSelectedTime(t.addHours(-val));break;case "m":this.setSelectedTime(t.addMinutes(-val)); break;case "s":this.setSelectedTime(t.addSeconds(val)); break;}}else{this.setSelectedTime(t.addMinutes(-val));}return;}this.setSelectedTime(t.addHours(-this.getHourIncrement()).addMinutes(-this.getMinuteIncrement()).addSeconds(-this.getSecondIncrement()));};/* TimeSpan(days, hours, minutes, seconds);   TimeSpan(milliseconds);   TimeSpan(timeString); //1.10:15:45   TimeSpan(formattedTimeString, timeFormat, designatorArray); */if(typeof(window["BDP"])=="undefined"){window["BDP"]={};}BDP.TimeSpan=function(days, hours, minutes, seconds){this._isTime=true;this.common=new Coolite.Common(); var argLength=arguments.length;this.addProperty=function(name, value, createSetMethod){ this[name]=value;var functionSuffix=name.charAt(0).toUpperCase()+name.substring(1, name.length);this["get"+functionSuffix]=function(){return this[name];};if(createSetMethod){this["set"+functionSuffix]=function(vNewValue){this[name]=vNewValue;};}};var _days, _hours, _minutes, _seconds, tempTime;if(argLength==4){_days=days; _hours=hours; _minutes=minutes; _seconds=seconds;}else if(argLength==1 && typeof(days)=="number"){var milliseconds=days;if(milliseconds < 0){milliseconds+=(24*60*60*1000);}var diff=Math.abs(milliseconds);var dMod, hMod, mMod;_days=Math.floor(diff/(24*60*60*1000));dMod=diff % (24*60*60*1000);if(dMod && this.common.isNumeric(dMod)){_hours=Math.floor(dMod/(60*60*1000));hMod=dMod % (60*60*1000);if(hMod && this.common.isNumeric(hMod)){_minutes=Math.floor(hMod/(60*1000));mMod=hMod % (60*1000);if(mMod && this.common.isNumeric(mMod)){_seconds=Math.floor(mMod/(1000));}}}} else if(argLength==1 && typeof(days)=="string"){tempTime=this.parse(days);}else if(argLength==2){this._isTime=false; return null;}else if(argLength==3 && typeof(days)=="string" && typeof(hours)=="string"){tempTime=this.parse(days, hours, minutes);}if(tempTime!=null) {_days=tempTime.getDays();_hours=tempTime.getHours();_minutes=tempTime.getMinutes();_seconds=tempTime.getSeconds();}this.addProperty("days", (_days)?_days: 0, true);this.addProperty("hours", (_hours)?_hours:0, true);this.addProperty("minutes", (_minutes)?_minutes:0, true);this.addProperty("seconds", (_seconds)?_seconds:0, true);var mFact=Math.floor(this.getSeconds()/60);if(mFact>0){this.setMinutes(1*this.getMinutes()+mFact);this.setSeconds(1*this.getSeconds() - (mFact*60));}var hFact=Math.floor(_minutes/60);if(hFact>0){this.setHours(1*this.getHours()+hFact);this.setMinutes(1*this.getMinutes() - (hFact*60));}var dFact=Math.floor(_hours/24);if(dFact>0){   this.setDays(1*this.getDays()+dFact);this.setHours(1*this.getHours() - (dFact*24));}};BDP.TimeSpan.prototype.getIsTime=function(){return this._isTime;};BDP.TimeSpan.prototype.parse=function(value, format, designators){var specifiers=new Array("hours","minutes","seconds"), parts, days, designatorText=null, value=value.toString();;for(var i=0; i<specifiers.length; i++){specifiers[i]=0 };if(!format){if(value.indexOf(".")>-1){parts=value.split("."); days=parts[0]; if(parts.length>1){value=parts[1];}}parts=value.split(":");for(var i=0; i<parts.length; i++){specifiers[i]=parts[i];}}else{var tokens=this.common.tokenizeFormat(format);var i_value=0;for(var i=0; i<tokens.length; i++){var token=tokens[i];switch(token){case "h" :case "hh" :hourText=this.common.getTextByToken(value, i_value, 1, 2);if(!hourText) {this._isTime=false; return null;}i_value+=hourText.length;specifiers[0]=parseInt(hourText, 10);break;case "m" :case "mm" :minuteText=this.common.getTextByToken(value, i_value, 1, 2);if(!minuteText){this._isTime=false; return null;}i_value+=minuteText.length;specifiers[1]=parseInt(minuteText, 10);break;case "s" :case "ss" :secondText=this.common.getTextByToken(value, i_value, 1, 2);if(!secondText){this._isTime=false; return null;}i_value+=secondText.length;specifiers[2]=parseInt(secondText, 10);break;case "t" :designatorText=value.substring(i_value, i_value+1);case "tt" :if(!designators){this._isTime=false; return null;}amDesignatorText=value.substring(i_value, i_value+designators[0].length);pmDesignatorText=value.substring(i_value, i_value+designators[1].length);if(amDesignatorText.toLowerCase()==designators[0].toLowerCase()){designatorText=amDesignatorText;}else if(pmDesignatorText.toLowerCase()==designators[1].toLowerCase()){designatorText=pmDesignatorText;}else designatorText=null;if(!designatorText){this._isTime=false; return null;}i_value+=designatorText.length;break;default :i_value+=token.length;}}}if(!isNaN(specifiers[0]) && !isNaN(specifiers[1]) && !isNaN(specifiers[2])){if(designatorText!=null && designators){if(designatorText.toLowerCase()==designators[0].toLowerCase() && specifiers[0]==12){specifiers[0]=0;}else if(designatorText.toLowerCase()==designators[1].toLowerCase() && specifiers[0]!=12){specifiers[0]=specifiers[0]+12;}}if(specifiers[0]>23||specifiers[1]>59||specifiers[2]>59){this._isTime=false;return null;}else{this._isTime=true;return new BDP.TimeSpan(null, specifiers[0], specifiers[1], specifiers[2]);}}this._isTime=false;return null;};BDP.TimeSpan.prototype.compare=function(timeSpan){var t1=new Date(1970,1,1, this.getHours(), this.getMinutes(), this.getSeconds()),t2;/*t1=t1.addDays(this.getDays());*/if(timeSpan==null){t2=new Date(1970,1,1,0,0,0);}else{t2=new Date(1970,1,1, timeSpan.getHours(), timeSpan.getMinutes(), timeSpan.getSeconds()); /* t2=t2.addDays(timeSpan.getDays()); */ }return (t1>t2)?1:(t1 < t2)?-1:0;};BDP.TimeSpan.prototype.add=function(timeSpan){return (timeSpan==null)?this:this.addSeconds(timeSpan.getMilliseconds()/1000);};BDP.TimeSpan.prototype.subtract=function(timeSpan){return (timeSpan==null)?this:this.addSeconds(-timeSpan.getMilliseconds()/1000);};BDP.TimeSpan.prototype.addDays=function(number){return new BDP.TimeSpan(this.getMilliseconds()+parseInt(number)*(24*60*60*1000));};BDP.TimeSpan.prototype.addHours=function(number){return new BDP.TimeSpan(this.getMilliseconds()+parseInt(number)*(60*60*1000));};BDP.TimeSpan.prototype.addMinutes=function(number){return new BDP.TimeSpan(this.getMilliseconds()+parseInt(number)*(60*1000));};BDP.TimeSpan.prototype.addSeconds=function(number){return new BDP.TimeSpan(this.getMilliseconds()+parseInt(number)*1000);};BDP.TimeSpan.prototype.addMilliseconds=function(number){return new BDP.TimeSpan(this.getMilliseconds()+parseInt(number));};BDP.TimeSpan.prototype.getMilliseconds=function(){return (this.getDays()*(24*60*60*1000))+(this.getHours()*(60*60*1000))+(this.getMinutes()*(60*1000))+(this.getSeconds()*(1000));};BDP.TimeSpan.prototype.get12HourHour=function(){return ((h=this.getHours() % 12)?h:12);};BDP.TimeSpan.prototype.getDesignator=function(amDesignator, pmDesignator){return (this.getHours() < 12)?(amDesignator)?amDesignator:"AM":(pmDesignator)?pmDesignator:"PM" };BDP.TimeSpan.prototype.toString=function(format, amDesignator, pmDesignator){var self=this;if(format){return format.replace(/(d|dd|HH|H|hh|h|mm|m|ss|s|tt|t)/gi,function($1){switch ($1){case "d":return self.getDays();case "dd":return self.common.toPaddedString(self.getDays(),2);case "H":return self.getHours();case "HH":return self.common.toPaddedString(self.getHours(),2);case "h":return self.get12HourHour();case "hh":return self.common.toPaddedString(self.get12HourHour(),2);case "m":return self.getMinutes();case "mm":return self.common.toPaddedString(self.getMinutes(),2);case "s":return self.getSeconds();case "ss":return self.common.toPaddedString(self.getSeconds(),2);case "t":return self.getDesignator(amDesignator, pmDesignator).substring(0,1);case "tt":return self.getDesignator(amDesignator, pmDesignator);}});}else{if(self.getDays()!=null && self.getDays()>0){return self.getDays()+"."+self.getHours()+":"+self.common.toPaddedString(self.getMinutes(),2)+":"+self.common.toPaddedString(self.getSeconds(),2);}else{return self.getHours()+":"+self.common.toPaddedString(self.getMinutes(),2)+":"+self.common.toPaddedString(self.getSeconds(),2);}}};/* Date and Time Helpers */Date.prototype.addHours=function(number){return (new Date(this.getTime()+(parseInt(number)*60*60*1000)));};Date.prototype.addMinutes=function(number){return (new Date(this.getTime()+(parseInt(number)*60*1000)));};Date.prototype.addSeconds=function(number){return (new Date(this.getTime()+(parseInt(number)*1000)));};Date.prototype.getTimeOfDay=function(){return new BDP.TimeSpan(null,this.getHours(), this.getMinutes(), this.getSeconds());};if(typeof(window["Coolite"])=="undefined"){window["Coolite"]={};}Coolite.Common=function(){this.addHandler=function(ctrl, func, args){var r; if(func!=null && window[func]){r=window[func](ctrl, args);};return (r==false)?false:true;};this.addEvent=function(el, type, fn, capture) {if(el.addEventListener){el.addEventListener(type, fn, capture); return true;}else if(el.attachEvent){var r=el.attachEvent('on'+type, fn); return r;}else{el['on'+type]=fn;}};this.isNumeric=function(value){ var digits="1234567890";for (var i=0; i < value.length; i++){if(digits.indexOf(value.charAt(i))==-1){return false;}}return true;};this.toPaddedString=function(value, length, character){ character=character||"0";var text=value.toString();while(text.length < length)text=character+text;return text;};this.tokenizeFormat=function(value){ var tokens=new Array();if(value!=null && value.length>0){var i_format=0;var c;var token;while(i_format < value.length){c=value.charAt(i_format);token="";while((i_format < value.length) && (value.charAt(i_format)==c)){token+=value.charAt(i_format++);}tokens[tokens.length]=token;}}return tokens;};this.getTextByToken=function(str,i,minlength,maxlength){for(var x=maxlength; x >= minlength; x--){var valuePart=str.substring(i, i+x);if(valuePart.length < minlength){return null;}if(this.isNumeric(valuePart)){return valuePart;}}return null;};this.isDate=function(value){return (value.constructor.toString().match(/Date/i)=="Date");};this.trim=function(value){var text=value.toString();while ((text.substring(0,1)==" ")||(text.substring(0,1)=="\n")||(text.substring(0,1)=="\r")){text=text.substring(1,text.length);}while ((text.substring(text.length-1,text.length)==" ")||(text.substring(text.length-1,text.length)=="\n")||(text.substring(text.length-1,text.length)=="\r")){text=text.substring(0,text.length-1);}return text;};this.isNullOrEmpty=function(value){return (value!=null && typof(value)=="string" && value.Length>0);};};if(typeof(Sys)!=='undefined') Sys.Application.notifyScriptLoaded();